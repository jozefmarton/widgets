<style>
	.wc117 { position: relative; height: 500px; border-radius: 4px; }
	.wc117-images-container { position: absolute; width: 100%; height: 100%; }
	.wc117-images { overflow: hidden; white-space: nowrap; font-size: 0; }
	.wc117-image { position: relative; display: inline-block; }
	.wc117-image img { border-radius: 4px; width: 100%; }
	.wc117-image.selected .wc117-headline { opacity: 1; transform: scale(1); }
	.wc117-headline { position: absolute; color: white; top: 80px; left: 80px; opacity: 0; transform: scale(1.3); transition: all 0.3s; }
	.wc117-headline i { margin-right: 10px; }
	.wc117-headline-title { font-size: 30px; font-weight: bold; }
	.wc117-headline-text { font-size: 16px; max-width: 400px; margin: 20px 0 30px; white-space: pre-wrap; }
	.wc117-controls { text-align: center; width: 100%; bottom: 30px; position: absolute; z-index: 1; }
	.wc117-headline-link { display: inline-block; position: relative; font-size: 16px; background-color: rgba(0,0,0,0.5); padding: 10px 30px; border-radius: 4px; color: white; font-weight: bold; }
	.wc117-headline-link:hover { background-color: black; text-decoration: none; }
	.wc117 button { width: 18px; height: 18px; border: 0; background-color: transparent; outline: 0; margin: 0 4px; padding: 0; color: gray; font-size: 16px; transform: scale(0.7); transition: all 0.3s; vertical-align: bottom; }
	.wc117 button.selected { transform: scale(1); color: #F4B255; }

	.CMS_preview .wc117-images-container { position: relative; }
	.CMS_preview .wc117 { height: auto; }
	.CMS_preview .wc117-headline { opacity: 1; transform: scale(1); }
	.CMS_preview .wc117-image { display: block; margin-bottom: 20px; }
	.CMS_preview .wc117-images { position: relative; }

	@media(max-width: 980px) {
		.wc117-headline { top: 60px; left: 60px; }
		.wc117-headline-title { font-size: 20px; }
		.wc117-headline-text { font-size: 12px; max-width: 300px; margin: 15px 0 20px; }
		.wc117-headline-link { padding: 8px 20px; font-size: 14px; }
	}

	@media(max-width: 768px) {
		.wc117-headline { display: none; }
	}

</style>

<script editor>

	option('delay', 'Timeout in seconds', 1, 'number', 50, 1);

	exports.configure = function(options, el) {
		el.attrd('---', 'wc117__null__delay:' + options.delay);
	};

</script>

<div class="wm wb wc117" data---="wc117__null__delay:4">
	<div class="wc117-images-container">
		<div class="wc117-images-scroll">
			<div class="wc117-images">
				<div class="wc117-image CMS_repeat">
					<div class="wc117-headline CMS_remove">
						<div class="wc117-headline-title CMS_edit">Welcome here</div>
						<div class="wc117-headline-text CMS_edit">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus hic explicabo.</div>
						<a href="#" class="wc117-headline-link CMS_edit CMS_remove"><i class="fa fa-caret-right CMS_edit CMS_remove"></i><span class="CMS_edit CMS_unwrap">Lorem asldjlas</span></a>
					</div>
					<a href="#"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABHQAAAH0AQMAAABmSuiKAAAAA1BMVEUhISFeAxSwAAAAXElEQVQYGe3BgQAAAADDoPtTD+AK1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIATGU8AAVmqEjoAAAAASUVORK5CYII=" class="img-responsive CMS_edit" alt="" border="0" data-cms-width="1140" data-cms-height="500" /></a>
				</div>
				<div class="wc117-image CMS_repeat CMS_remove">
					<div class="wc117-headline CMS_remove">
						<div class="wc117-headline-title CMS_edit">Welcome here</div>
						<div class="wc117-headline-text CMS_edit">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus hic explicabo.</div>
						<a href="#" class="wc117-headline-link CMS_edit CMS_remove"><i class="fa fa-caret-right CMS_edit CMS_remove"></i><span class="CMS_edit CMS_unwrap">Lorem asldjlas</span></a>
					</div>
					<a href="#"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABHQAAAH0AQMAAABmSuiKAAAAA1BMVEUhISFeAxSwAAAAXElEQVQYGe3BgQAAAADDoPtTD+AK1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIATGU8AAVmqEjoAAAAASUVORK5CYII=" class="img-responsive CMS_edit" alt="" border="0" data-cms-width="1140" data-cms-height="500" /></a>
				</div>
				<div class="wc117-image CMS_repeat CMS_remove">
					<div class="wc117-headline CMS_remove">
						<div class="wc117-headline-title CMS_edit">Welcome here</div>
						<div class="wc117-headline-text CMS_edit">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus hic explicabo.</div>
						<a href="#" class="wc117-headline-link CMS_edit CMS_remove"><i class="fa fa-caret-right CMS_edit CMS_remove"></i><span class="CMS_edit CMS_unwrap">Lorem asldjlas</span></a>
					</div>
					<a href="#"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABHQAAAH0AQMAAABmSuiKAAAAA1BMVEUhISFeAxSwAAAAXElEQVQYGe3BgQAAAADDoPtTD+AK1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIATGU8AAVmqEjoAAAAASUVORK5CYII=" class="img-responsive CMS_edit" alt="" border="0" data-cms-width="1140" data-cms-height="500" /></a>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	COMPONENT('wc117', 'delay:4000;width:1140;height:500', function(self, config) {

		var container, prevbutton, previmage, buttons;
		var index = 0;
		var count = 0;
		var skip = true;

		self.make = function() {

			container = self.find('.wc117-images');
			count = self.find('.wc117-image').length;

			var builder = [];

			for (var i = 0; i < count; i++)
				builder.push('<button><i class="fa fa-circle"></i></button>');

			self.append('<div class="wc117-controls">{0}</div>'.format(builder.join('')));
			buttons = $(self.find('.wc117-controls').get(0));

			self.event('click', 'button', function() {
				index = $(this).index();
				self.show(index);
				skip += 2;
			});

			self.autosize();
			$(W).on('resize', self.autosize);

			interval = setInterval(function() {

				if (skip) {
					skip--;
					return;
				}

				index++;

				if (index >= count)
					index = 0;

				self.show(index);
			}, config.delay * 1000);
		};

		self.autosize = function() {
			self.width(function(width) {
				self.css('height', (config.height / config.width) * width);
				if (!index) {
					index = 0;
					self.show(index);
				}
			});
		};

		self.show = function(index) {
			var offset = self.width();
			container.animate({ scrollLeft: offset * index }, 500);
			previmage && previmage.rclass('selected');

			setTimeout(function() {
				previmage = container.find('.wc117-image').eq(index).aclass('selected');
			}, 300);

			prevbutton && prevbutton.rclass('selected');
			prevbutton = buttons.find('button').eq(index).aclass('selected');
		};

	});
</script>